<!DOCTYPE html>
<html lang="en">
<head>
	<title>게시판</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

	<link href='https://fonts.googleapis.com/css?family=Aldrich' rel='stylesheet'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body
		{
			background-image: url("https://blackbearwow.github.io/image/paper.gif");
		}
	</style>
    <script>
        $(document).ready(()=>{
            updatePosts();
        })
        function updatePosts(){
            $.ajax({
  				url: "/getPosts",
  				type: "get",
  				data: {
  				},
			    success: function(rows){
                    rows.forEach((row, index, arr)=>{
                        // UTC 시간을 JavaScript Date 객체로 변환
                        const utcDate = new Date(row.postDatetime);
                        // 브라우저의 로케일에 따라 한국 시간으로 변환하여 표시
                        const koreaTime = utcDate.toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' });

                        let text = `<ul class="list-group" onclick="location.href='viewPost/${row.bId}'"><li class="list-group-item list-group-item-action">
                            <a>${koreaTime}</a>
                            <a style='color:darkgreen'>${row.title}</a>
                            <a style='color:darkblue'>[${row.commentNum}]</a>
                            </li></ul>`;
                        $('#posts').append(text);
                    })
			    	console.log(rows);
			    },
			    error: function(error){
			    	console.log(error);
			    }
		    });
        }
    </script>
</head>
<body>
	<nav class="navbar navbar-expand navbar-dark bg-dark fixed-top">
		<a class="navbar-brand" href="/" target="_self">HOME</a>
    	<ul class="navbar-nav mr-auto">
    		<%- navText %>
    	</ul>
	</nav>
	<br>
	<br>
	<div class="container p-3 my-3 bg-dark text-white" id="posts">
		<h4>글 리스트 <input type="button" class="btn btn-success" value="새글쓰기" id="btnLogin" onclick="location.href='newPost'"></h4>
		<!--ul class="list-group">
		    <li class="list-group-item list-group-item-action"><a href="signUp">글입니당1</a></li>
		</ul-->
	</div>
    </body>
</html>